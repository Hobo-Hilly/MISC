Performing Online Password Attacks

An online password attack is performed on a network service, such as SSH, HTTP, FTP, SMB, and so on. For example, an attacker might attempt to guess a user’s password for a Website login. Most of the time, servers or network devices are not equipped to block an online password attack. Therefore, these attacks can succeed without much effort.

Password attacks can be of two types. The first type is the dictionary attack, which uses a list of common words. It continues to run through the list until a suitable match is found. On the other hand, a brute-force attack attempts to use words based on a given character set. With an online password attack, either one of the methods can be used. However, a dictionary attack is mostly the choice because of the slow speed of attack.

In this exercise, you will learn about performing an online password attack.
Alert
The tools and techniques displayed in these exercises are to be used for improving network security. Usage of all tools for attacking targets without prior mutual consent is illegal. Practice Labs assumes no liability for any misuse or damage caused if these tools and techniques are used for malicious activities.
Learning Outcomes

After completing this exercise, you will be able to:

    Switch Off the Windows Firewall on PLABWIN810
    Use Wordlists
    Use Hydra to Guess Usernames and Passwords

Your Devices

You will be using the following devices in this lab. Please power these on now.

    PLABKALI01 - (Kali 2019.2 - Linux Kali)
    PLABWIN10 - (Windows 10 - Domain Member)
    PLABWIN810 - (Windows 8.1 - Domain Member)

Practice Labs screenshot.
Task 1 - Switching Off the Windows Firewall on PLABWIN810

You will need to switch off the Windows Firewall to perform an attack on PLABWIN810. There are attacking methods that you can use to bypass the Windows or any other firewall running on the target. However, for the sake of this module, you will switch off the Windows Firewall and proceed with the remaining tasks.

To switch off the Windows Firewall on PLABWIN810, perform the following steps:
Step 1

Ensure that you have connected to PLABWIN810 and logged into the system.

Note that the PLABWIN810 desktop is displayed.

Figure 1.1 Screenshot of PLABWIN810
Figure 1.1 Screenshot of PLABWIN810: Showing the desktop of PLABWIN810.

Step 2

Right-click the Windows Charm and select Control Panel.

Figure 1.2 Screenshot of PLABWIN810
Figure 1.2 Screenshot of PLABWIN810: Right-clicking the Windows Charm and selecting Control Panel.

Step 3

The Control Panel window is displayed. On the Adjust your computer’s settings page, click System and Security.

Figure 1.3 Screenshot of PLABWIN810
Figure 1.3 Screenshot of PLABWIN810: Clicking System and Security on the Adjust your computer’s settings page.

Step 4

On the next page, several security-related options are displayed. Click Windows Firewall.

Figure 1.4 Screenshot of PLABWIN810
Figure 1.4 Screenshot of PLABWIN810: Clicking Windows Firewall.

Step 5

On the Help protect your PC with Windows Firewall page, click Turn Windows Firewall on or off in the left pane.

Figure 1.5 Screenshot of PLABWIN810
Figure 1.5 Screenshot of PLABWIN810: Clicking Turn Windows Firewall on or off in the left pane.

Step 6

On the Customize settings for each type of network page, select Turn off Windows Firewall (not recommended) for Domain, Private, and Public network.

Click OK.

Figure 1.6 Screenshot of PLABWIN810
Figure 1.6 Screenshot of PLABWIN810: Selecting Turn off Windows Firewall (not recommended) for Domain, Private, and Public network.

Step 7

On the Help protect your PC with Windows Firewall page, notice that Windows Firewall is now turned off for Domain, Private, and Public network.

Figure 1.7 Screenshot of PLABWIN810
Figure 1.7 Screenshot of PLABWIN810: Verifying the Windows Firewall status and closing the Control Panel.

Close the Control Panel window and the PLABWIN810 window.
Task 2 - Using Wordlists

In a dictionary attack, a list of words, known as wordlist, is pre-defined and is used to match against the victim’s password. There are ready-made password lists available on the Internet. A password list can be a few bytes large, or it can also be gigabytes, as the more words in a password file, the bigger the size. If you do not intend to use a pre-defined wordlist, you can create your own. There are tools that are available that can help you create a wordlist. Some of the tools that are used commonly are:

    Wyd: password profiling tool
    Crunch: Password Cracking Wordlist Generator
    CeWL: Password Cracking Custom Word List Generator
    RSMangler: Keyword Based Wordlist Generator for Brute forcing

In this task, you will learn about the wordlists. To do this, perform the following steps:
Step 1

Ensure you have powered on all the devices listed in the introduction, and connect to PLABKALI01.

On the login page, mention the following login credentials:

Login ID:

root

Password

Passw0rd

Click the Log In button.

Figure 1.8 Screenshot of PLABKALI01
Figure 1.8 Screenshot of PLABKALI01: Login credentials typed into the login screen.

Step 2

Kali desktop is displayed.
Note: You can safely exit the server change notification.

On the desktop, click the Terminal icon.

Figure 1.9 Screenshot of PLABKALI01
Figure 1.9 Screenshot of PLABKALI01: Clicking the Terminal icon in the left pane.

Step 3

The terminal window is displayed. First, let’s look at the pre-defined wordlists that are available in Kali Linux. To do this, type the following command:

ls -l /usr/share/wordlists

Press Enter.

Figure 1.10 Screenshot of PLABKALI01
Figure 1.10 Screenshot of PLABKALI01: Entering the command to list the pre-defined wordlists.

Step 4

Notice several wordlist files are displayed.

Figure 1.11 Screenshot of PLABKALI01
Figure 1.11 Screenshot of PLABKALI01: Showing the pre-defined wordlists in Kali Linux.

Step 5

Let’s create a small wordlist manually. Minimize the terminal window to reach the desktop and click the Leafpad icon.

Figure 1.12 Screenshot of PLABKALI01
Figure 1.12 Screenshot of PLABKALI01: Clicking the Leafpad icon from the left pane.

Step 6

Leafpad opens with a file named (Untitled).

Type the following words:

test

bee

bug

12345

12345678

password

passw0rd

p@ssw0rd

admin

admin@123

Press Enter after each word except the last one.

Figure 1.13 Screenshot of PLABKALI01
Figure 1.13 Screenshot of PLABKALI01: Entering the words in the Untitled file.

Step 7

Press Ctrl + s to save the file.

The Save As dialog box is displayed. From the left pane, select Desktop. In the Name text box, type the following:

plab.txt

Press Enter.

Close the plab.txt file.

Figure 1.14 Screenshot of PLABKALI01
Figure 1.14 Screenshot of PLABKALI01: Saving the file as plab.txt.

Step 8

Notice that on the desktop, a file named plab.txt is now created.

Figure 1.15 Screenshot of PLABKALI01
Figure 1.15 Screenshot of PLABKALI01: Showing the plab.txt file on the desktop.

Step 9

Clear the screen by entering the following command:

clear

Kali Linux also contains a tool named cewl, which is used to generate wordlists. Let’s use cewl to create a wordlist.

Type the following command:
Note: The parameter -w defines the name of the wordlist. The -d parameter defines the depth of the search in a Website. The -m parameter defines the minimum word length.

cewl -w test.txt -d 5 -m 3 intranet

Press Enter.

Figure 1.16 Screenshot of PLABKALI01
Figure 1.16 Screenshot of PLABKALI01: Entering the cewl command to generate the wordlist.

Step 10

The command runs successfully without any error.

Figure 1.17 Screenshot of PLABKALI01
Figure 1.17 Screenshot of PLABKALI01: Showing the outcome of the cewl command.

Step 11

Let’s verify if the test.txt file has been created. Type the following command:

ls -l

Press Enter.

Figure 1.18 Screenshot of PLABKALI01
Figure 1.18 Screenshot of PLABKALI01: Entering the ls command to list files.

Step 12

Notice that the test.txt file has been created.

Figure 1.19 Screenshot of PLABKALI01
Figure 1.19 Screenshot of PLABKALI01: Showing the file listing with the test.txt file.

Step 13

Clear the screen by entering the following command:

clear

Let’s open the test.txt file and see the words that are stored in it.

Type the following command:

leafpad test.txt

Press Enter.

Figure 1.20 Screenshot of PLABKALI01
Figure 1.20 Screenshot of PLABKALI01: Entering the command to open test.txt file with Leafpad.

Step 14

The test.txt file is now open. It has captured several words from the Intranet Website.

Close this file.

Figure 1.21 Screenshot of PLABKALI01
Figure 1.21 Screenshot of PLABKALI01: Showing the contents of the test.txt file.

Keep the terminal window open.
Task 3 - Using Hydra to Guess Usernames and Passwords

Hydra is a tool that can perform dictionary attacks against several protocols, such as HTTP, FTP, SMB, SSH, and so on. Hydra is designed to conduct attacks against authentication services, which might be running using a protocol, such as HTTP.

In this task, you will use Hydra to guess usernames and passwords. To do this, perform the following steps:
Step 1

Ensure you have powered on all the devices listed in the introduction and connect to PLABKALI01. The command prompt window should be open.

Clear the screen by entering the following command:

clear

Hydra is not installed on Kali Linux by default. To use it, you need to install it first. Type the following command:

apt-get install hydra

Press Enter.

Figure 1.22 Screenshot of PLABKALI01
Figure 1.22 Screenshot of PLABKALI01: Entering the command to install hydra.

Step 3

After the installation is complete, you are back on the prompt in the terminal window.

Figure 1.23 Screenshot of PLABKALI01
Figure 1.23 Screenshot of PLABKALI01: Showing the completed installation process for hydra.

Step 4

Now, you will use Hydra to perform a dictionary attack using plab.txt that you had created.
Note: In reality, the wordlist will never be so small, but for the sake of demonstration, we can use this wordlist.

Clear the screen by entering the following command:

clear

You have a vulnerable application, bWAPP, running on 192.168.0.10. You will use the plab.txt file to perform a dictionary attack against this application. To do this, type the following command:
Note: The hydra command takes the following parameters inputs: -t: Defines the number of logins to try simultaneously. -V: Displays each attempt of login and password. -f: Stops the dictionary attack after a suitable match for username and password is found. -l username: Defines a username that needs to be cracked. For example, the bee was the username for the bWAPP application. If you do not know the username, you can use the -L parameter and provide a username list, which is similar to wordlist. -P wordlist: Defines the wordlist containing probable passwords. You can use -p parameter for a single password.The website name or IP address: Defines the Website name or its IP address. Protocol: Defines the services on which the dictionary attack is launched.

hydra -t 5 -V -f -l bee -P /root/Desktop/plab.txt 192.168.0.10 ftp

Press Enter.

Figure 1.24 Screenshot of PLABKALI01
Figure 1.24 Screenshot of PLABKALI01: Entering the hydra command with parameters to launch a dictionary attack.

Step 5

Let’s see if Hydra has been able to find out the password for the user, bee.
Note: Depending on the size of the wordlist, the time to get the results will vary.

Notice the text in green. You have been able to crack the password for this FTP service on the host, 192.168.0.10.

Figure 1.25 Screenshot of PLABKALI01
Figure 1.25 Screenshot of PLABKALI01: Showing the successfully captured username and password.

Keep all devices in their current state and proceed to the next exercise.
3 of 5
